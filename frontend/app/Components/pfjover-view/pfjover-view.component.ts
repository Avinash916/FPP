import { Component, OnInit,Version } from '@angular/core';
import { ServiceConsumer } from '../../service-consumer.service';
import { RepositoryService } from '../../repository.service';
import { PfjOverviewOperations } from '../../Models/pfjoverview-operations';
import { CustomerPriceDetails } from '../../Models/customer-price-details';
import { VERSION } from '@angular/platform-browser-dynamic';
@Component({
  selector: 'app-pfjover-view',
  templateUrl: './pfjover-view.component.html',
  styleUrls: ['./pfjover-view.component.css']
})
export class PfjoverViewComponent implements OnInit {
  selectedCustPricingDetails : CustomerPriceDetails;
  constructor(public serviceConsumer: ServiceConsumer ,public repository : RepositoryService ) {
   }

  ngOnInit() {
   if(this.repository.customerPricingDetails.length<=0)
    {
      //Get customer pricing details from service.
      //this.serviceConsumer.GetCustomerPricingDetails()
      //.subscribe(data=>this.PopulateCustomerPricingDetails(data),error=>console.log(error));
    }
    else
    {
      console.log("this.repository.selectedDataPeriod "+this.repository.selectedDataPeriod);
      this.ProcessSelectedCustomerPricingDetails(this.repository.selectedDataPeriod);
      this.ToggleTableauHeaderTxt(this.repository.selectedTableauFilter);
    }
    //let s = '{"temporalPeriod":"MTD","pfjTotal":{"grossProfitDollars":{"vsTgLeft":59,"vsTgLeftPositive":true,"vsTgRight":11,"vsLyLeft":5,"vsLyLeftPositive":true,"vsLyRight":65},"volume":{"vsTgLeft":60,"vsTgLeftPositive":true,"vsTgRight":467,"vsLyLeft":70,"vsLyLeftPositive":true,"vsLyRight":2087},"margin":{"vsTgLeft":-25,"vsTgLeftPositive":false,"vsTgRight":95,"vsLyLeft":59,"vsLyLeftPositive":true,"vsLyRight":10},"totalGAL":3,"totalTarget":13},"betterOf":{"grossProfitDollars":{"vsTgLeft":-32,"vsTgLeftPositive":false,"vsTgRight":80,"vsLyLeft":29,"vsLyLeftPositive":true,"vsLyRight":17},"volume":{"vsTgLeft":55,"vsTgLeftPositive":true,"vsTgRight":156,"vsLyLeft":56,"vsLyLeftPositive":true,"vsLyRight":165},"margin":{"vsTgLeft":42,"vsTgLeftPositive":true,"vsTgRight":10,"vsLyLeft":-18,"vsLyLeftPositive":false,"vsLyRight":71},"mixPercentage":{"mixActual":100,"mixTarget":270,"mixVsLy":-87,"mixVsLyPositive":false},"buyingPerfActual":3,"buyingPerfTarget":92,"effPumpFeeActual":23,"effPumpFeeTarget":90},"totalRetail":{"grossProfitDollars":{"vsTgLeft":-1,"vsTgLeftPositive":false,"vsTgRight":71,"vsLyLeft":40,"vsLyLeftPositive":true,"vsLyRight":29},"volume":{"vsTgLeft":-11,"vsTgLeftPositive":false,"vsTgRight":-87,"vsLyLeft":-56,"vsLyLeftPositive":false,"vsLyRight":-97},"margin":{"vsTgLeft":5,"vsTgLeftPositive":true,"vsTgRight":84,"vsLyLeft":85,"vsLyLeftPositive":true,"vsLyRight":5},"mixPercentage":{"mixActual":100,"mixTarget":97,"mixVsLy":-99,"mixVsLyPositive":false}},"retailMinus":{"grossProfitDollars":{"vsTgLeft":-53,"vsTgLeftPositive":false,"vsTgRight":89,"vsLyLeft":-49,"vsLyLeftPositive":false,"vsLyRight":86},"volume":{"vsTgLeft":-57,"vsTgLeftPositive":false,"vsTgRight":-59,"vsLyLeft":-58,"vsLyLeftPositive":false,"vsLyRight":-60},"margin":{"vsTgLeft":-48,"vsTgLeftPositive":false,"vsTgRight":80,"vsLyLeft":7,"vsLyLeftPositive":true,"vsLyRight":25},"mixPercentage":{"mixActual":100,"mixTarget":743,"mixVsLy":-98,"mixVsLyPositive":false},"rmDiscountActual":0,"rmDiscountTarget":0},"funded":{"grossProfitDollars":{"vsTgLeft":13,"vsTgLeftPositive":true,"vsTgRight":8,"vsLyLeft":-56,"vsLyLeftPositive":false,"vsLyRight":78},"volume":{"vsTgLeft":-4,"vsTgLeftPositive":false,"vsTgRight":-10,"vsLyLeft":-15,"vsLyLeftPositive":false,"vsLyRight":-30},"margin":{"vsTgLeft":-41,"vsTgLeftPositive":false,"vsTgRight":88,"vsLyLeft":24,"vsLyLeftPositive":true,"vsLyRight":22},"mixPercentage":{"mixActual":100,"mixTarget":293,"mixVsLy":-96,"mixVsLyPositive":false}},"ccc":{"grossProfitDollars":{"vsTgLeft":32,"vsTgLeftPositive":true,"vsTgRight":64,"vsLyLeft":86,"vsLyLeftPositive":true,"vsLyRight":10},"volume":{"vsTgLeft":-56,"vsTgLeftPositive":false,"vsTgRight":-57,"vsLyLeft":-7,"vsLyLeftPositive":false,"vsLyRight":-14},"margin":{"vsTgLeft":39,"vsTgLeftPositive":true,"vsTgRight":37,"vsLyLeft":12,"vsLyLeftPositive":true,"vsLyRight":63},"mixPercentage":{"mixActual":100,"mixTarget":754,"mixVsLy":-96,"mixVsLyPositive":false}}}';
    let s = '[{"temporalPeriod":"MTD","lastClosedPeriod":"JAN 2018","pFJTotal":{"grossProfitDollars":{"vsTgLeft":59.34392394,"vsTgLeftPositive":true,"vsTgRight":11.47476202,"vsLyLeft":5.02493261,"vsLyLeftPositive":true,"vsLyRight":65.79375335},"volume":{"vsTgLeft":60.95232985,"vsTgLeftPositive":true,"vsTgRight":467.861000,"vsLyLeft":70.59784470,"vsLyLeftPositive":true,"vsLyRight":2087.237800},"margin":{"vsTgLeft":-25.34971579,"vsTgLeftPositive":false,"vsTgRight":95.50693324,"vsLyLeft":59.88827141,"vsLyLeftPositive":true,"vsLyRight":10.26894604},"totalGAL":3.38235758,"totalTarget":13.02787243},"betterOf":{"grossProfitDollars":{"vsTgLeft":-32.61464901,"vsTgLeftPositive":false,"vsTgRight":80.28349368,"vsLyLeft":29.99194615,"vsLyLeftPositive":true,"vsLyRight":17.67689852},"volume":{"vsTgLeft":55.27775742,"vsTgLeftPositive":true,"vsTgRight":156.712200,"vsLyLeft":56.42346910,"vsLyLeftPositive":true,"vsLyRight":165.330400},"margin":{"vsTgLeft":42.93239621,"vsTgLeftPositive":true,"vsTgRight":10.71209885,"vsLyLeft":-18.00758947,"vsLyLeftPositive":false,"vsLyRight":71.65208453},"mixPercentage":{"mixActual":100.000000,"mixTarget":270.753500,"mixVsLy":-87.869200,"mixVsLyPositive":false},"buyingPerfActual":3.32123228,"buyingPerfTarget":92.98675670,"effPumpFeeActual":23.02818253,"effPumpFeeTarget":90.46419537},"totalRetail":{"grossProfitDollars":{"vsTgLeft":-1.27920923,"vsTgLeftPositive":false,"vsTgRight":71.57619259,"vsLyLeft":40.95913444,"vsLyLeftPositive":true,"vsLyRight":29.33784892},"volume":{"vsTgLeft":-11.10498207,"vsTgLeftPositive":false,"vsTgRight":-87.495700,"vsLyLeft":-56.14840326,"vsLyLeftPositive":false,"vsLyRight":-97.251200},"margin":{"vsTgLeft":5.66059411,"vsTgLeftPositive":true,"vsTgRight":84.64559740,"vsLyLeft":85.10495311,"vsLyLeftPositive":true,"vsLyRight":5.20123840},"mixPercentage":{"mixActual":100.000000,"mixTarget":97.422200,"mixVsLy":-99.874300,"mixVsLyPositive":false}},"retailMinus":{"grossProfitDollars":{"vsTgLeft":-53.16029063,"vsTgLeftPositive":false,"vsTgRight":89.60944893,"vsLyLeft":-49.73927683,"vsLyLeftPositive":false,"vsLyRight":86.18843513},"volume":{"vsTgLeft":-57.94569191,"vsTgLeftPositive":false,"vsTgRight":-59.785000,"vsLyLeft":-58.80903609,"vsLyLeftPositive":false,"vsLyRight":-60.140000},"margin":{"vsTgLeft":-48.03187202,"vsTgLeftPositive":false,"vsTgRight":80.75555916,"vsLyLeft":7.43731466,"vsLyLeftPositive":true,"vsLyRight":25.28637248},"mixPercentage":{"mixActual":100.000000,"mixTarget":743.970400,"mixVsLy":-98.177600,"mixVsLyPositive":false},"rmDiscountActual":0,"rmDiscountTarget":0},"funded":{"grossProfitDollars":{"vsTgLeft":13.05869525,"vsTgLeftPositive":true,"vsTgRight":8.64672517,"vsLyLeft":-56.59221716,"vsLyLeftPositive":false,"vsLyRight":78.29763758},"volume":{"vsTgLeft":-4.12857011,"vsTgLeftPositive":false,"vsTgRight":-10.815100,"vsLyLeft":-15.03289208,"vsLyLeftPositive":false,"vsLyRight":-30.630300},"margin":{"vsTgLeft":-41.78596314,"vsTgLeftPositive":false,"vsTgRight":88.57819177,"vsLyLeft":24.68064954,"vsLyLeftPositive":true,"vsLyRight":22.11157909},"mixPercentage":{"mixActual":100.000000,"mixTarget":293.018700,"mixVsLy":-96.828400,"mixVsLyPositive":false}},"ccc":{"grossProfitDollars":{"vsTgLeft":32.44225398,"vsTgLeftPositive":true,"vsTgRight":64.42892410,"vsLyLeft":86.21498271,"vsLyLeftPositive":true,"vsLyRight":10.65619537},"volume":{"vsTgLeft":-56.21679787,"vsTgLeftPositive":false,"vsTgRight":-57.201600,"vsLyLeft":-7.32122009,"vsLyLeftPositive":false,"vsLyRight":-14.825400},"margin":{"vsTgLeft":39.27614318,"vsTgLeftPositive":true,"vsTgRight":37.01505053,"vsLyLeft":12.76129797,"vsLyLeftPositive":true,"vsLyRight":63.52989574},"mixPercentage":{"mixActual":100.000000,"mixTarget":754.370200,"mixVsLy":-96.105800,"mixVsLyPositive":false}}},{"temporalPeriod":"LCM","lastClosedPeriod":"JAN 2018","pFJTotal":{"grossProfitDollars":{"vsTgLeft":60.25233868,"vsTgLeftPositive":true,"vsTgRight":31.42440227,"vsLyLeft":86.10545340,"vsLyLeftPositive":true,"vsLyRight":5.57128755},"volume":{"vsTgLeft":-58.57741570,"vsTgLeftPositive":false,"vsTgRight":-98.124500,"vsLyLeft":-64.30446853,"vsLyLeftPositive":false,"vsLyRight":-98.288600},"margin":{"vsTgLeft":-0.61939019,"vsTgLeftPositive":false,"vsTgRight":18.36581813,"vsLyLeft":0.10050921,"vsLyLeftPositive":true,"vsLyRight":17.64591873},"totalGAL":65.42411575,"totalTarget":59.69706292},"betterOf":{"grossProfitDollars":{"vsTgLeft":-15.00731656,"vsTgLeftPositive":false,"vsTgRight":31.09524135,"vsLyLeft":-71.82908928,"vsLyLeftPositive":false,"vsLyRight":87.91701407},"volume":{"vsTgLeft":-35.07709831,"vsTgLeftPositive":false,"vsTgRight":-40.964700,"vsLyLeft":4.15169718,"vsLyLeftPositive":true,"vsLyRight":8.947900},"margin":{"vsTgLeft":-53.42038900,"vsTgLeftPositive":false,"vsTgRight":77.71642635,"vsLyLeft":7.16617457,"vsLyLeftPositive":true,"vsLyRight":17.12986278},"mixPercentage":{"mixActual":100.000000,"mixTarget":143.436700,"mixVsLy":6266.130000,"mixVsLyPositive":true},"buyingPerfActual":30.83711911,"buyingPerfTarget":57.14220873,"effPumpFeeActual":76.54814109,"effPumpFeeTarget":15.60480991},"totalRetail":{"grossProfitDollars":{"vsTgLeft":-28.08122249,"vsTgLeftPositive":false,"vsTgRight":37.54423509,"vsLyLeft":-80.92943452,"vsLyLeftPositive":false,"vsLyRight":90.39244712},"volume":{"vsTgLeft":37.39113954,"vsTgLeftPositive":true,"vsTgRight":1566.893900,"vsLyLeft":34.47887243,"vsLyLeftPositive":true,"vsLyRight":650.717900},"margin":{"vsTgLeft":-18.81362229,"vsTgLeftPositive":false,"vsTgRight":74.06018124,"vsLyLeft":-31.28186177,"vsLyLeftPositive":false,"vsLyRight":86.52842072},"mixPercentage":{"mixActual":100.000000,"mixTarget":3.997400,"mixVsLy":43766.722200,"mixVsLyPositive":true}},"retailMinus":{"grossProfitDollars":{"vsTgLeft":7.57754269,"vsTgLeftPositive":true,"vsTgRight":75.74210729,"vsLyLeft":37.03263553,"vsLyLeftPositive":true,"vsLyRight":46.28701445},"volume":{"vsTgLeft":14.50689831,"vsTgLeftPositive":true,"vsTgRight":17.997000,"vsLyLeft":51.22165366,"vsLyLeftPositive":true,"vsLyRight":116.698300},"margin":{"vsTgLeft":-36.10317048,"vsTgLeftPositive":false,"vsTgRight":99.80958812,"vsLyLeft":43.00560687,"vsLyLeftPositive":true,"vsLyRight":20.70081077},"mixPercentage":{"mixActual":100.000000,"mixTarget":135.027000,"mixVsLy":12562.284300,"mixVsLyPositive":true},"rmDiscountActual":0,"rmDiscountTarget":0},"funded":{"grossProfitDollars":{"vsTgLeft":62.25579398,"vsTgLeftPositive":true,"vsTgRight":17.71302573,"vsLyLeft":11.26883910,"vsLyLeftPositive":true,"vsLyRight":68.69998061},"volume":{"vsTgLeft":62.98571907,"vsTgLeftPositive":true,"vsTgRight":338.958200,"vsLyLeft":-0.39904374,"vsLyLeftPositive":false,"vsLyRight":-0.486800},"margin":{"vsTgLeft":15.14421953,"vsTgLeftPositive":true,"vsTgRight":81.31912271,"vsLyLeft":23.50549443,"vsLyLeftPositive":true,"vsLyRight":72.95784781},"mixPercentage":{"mixActual":100.000000,"mixTarget":31.127400,"mixVsLy":5714.830800,"mixVsLyPositive":true}},"ccc":{"grossProfitDollars":{"vsTgLeft":84.22710373,"vsTgLeftPositive":true,"vsTgRight":8.70486410,"vsLyLeft":70.42278190,"vsLyLeftPositive":true,"vsLyRight":22.50918593},"volume":{"vsTgLeft":36.61022677,"vsTgLeftPositive":true,"vsTgRight":80.331100,"vsLyLeft":51.33459212,"vsLyLeftPositive":true,"vsLyRight":166.401600},"margin":{"vsTgLeft":-16.80287212,"vsTgLeftPositive":false,"vsTgRight":95.30689874,"vsLyLeft":14.64134515,"vsLyLeftPositive":true,"vsLyRight":63.86268147},"mixPercentage":{"mixActual":100.000000,"mixTarget":76.342400,"mixVsLy":15466.586600,"mixVsLyPositive":true}}},{"temporalPeriod":"LCYTD","lastClosedPeriod":"JAN 2018","pFJTotal":{"grossProfitDollars":{"vsTgLeft":55.19400093,"vsTgLeftPositive":true,"vsTgRight":1.47805819,"vsLyLeft":15.02001743,"vsLyLeftPositive":true,"vsLyRight":41.65204169},"volume":{"vsTgLeft":4.86754840,"vsTgLeftPositive":true,"vsTgRight":7.693100,"vsLyLeft":50.92791628,"vsLyLeftPositive":true,"vsLyRight":295.895100},"margin":{"vsTgLeft":74.52544821,"vsTgLeftPositive":true,"vsTgRight":11.74249705,"vsLyLeft":61.29943601,"vsLyLeftPositive":true,"vsLyRight":24.96850925},"totalGAL":17.21147435,"totalTarget":63.27184223},"betterOf":{"grossProfitDollars":{"vsTgLeft":48.11095379,"vsTgLeftPositive":true,"vsTgRight":12.75213757,"vsLyLeft":-22.03691896,"vsLyLeftPositive":false,"vsLyRight":82.90001032},"volume":{"vsTgLeft":26.97697856,"vsTgLeftPositive":true,"vsTgRight":63.187600,"vsLyLeft":29.49414278,"vsLyLeftPositive":true,"vsLyRight":73.411800},"margin":{"vsTgLeft":-16.10221193,"vsTgLeftPositive":false,"vsTgRight":42.52135504,"vsLyLeft":-12.38871697,"vsLyLeftPositive":false,"vsLyRight":38.80786008},"mixPercentage":{"mixActual":100.000000,"mixTarget":67.476300,"mixVsLy":-56.197500,"mixVsLyPositive":false},"buyingPerfActual":10.48624027,"buyingPerfTarget":18.56330220,"effPumpFeeActual":47.02711075,"effPumpFeeTarget":13.61940220},"totalRetail":{"grossProfitDollars":{"vsTgLeft":37.15645370,"vsTgLeftPositive":true,"vsTgRight":4.10414222,"vsLyLeft":-49.60974480,"vsLyLeftPositive":false,"vsLyRight":90.87034072},"volume":{"vsTgLeft":-4.87141427,"vsTgLeftPositive":false,"vsTgRight":-32.378400,"vsLyLeft":-8.92628655,"vsLyLeftPositive":false,"vsLyRight":-46.734100},"margin":{"vsTgLeft":20.34016904,"vsTgLeftPositive":true,"vsTgRight":25.69127699,"vsLyLeft":-48.07228942,"vsLyLeftPositive":false,"vsLyRight":94.10373545},"mixPercentage":{"mixActual":100.000000,"mixTarget":23.778800,"mixVsLy":-86.545400,"mixVsLyPositive":false}},"retailMinus":{"grossProfitDollars":{"vsTgLeft":-4.53627571,"vsTgLeftPositive":false,"vsTgRight":84.73368822,"vsLyLeft":77.50222090,"vsLyLeftPositive":true,"vsLyRight":2.69519161},"volume":{"vsTgLeft":28.10364562,"vsTgLeftPositive":true,"vsTgRight":137.706300,"vsLyLeft":-17.42421194,"vsLyLeftPositive":false,"vsLyRight":-26.425800},"margin":{"vsTgLeft":-85.57953121,"vsTgLeftPositive":false,"vsTgRight":88.55879106,"vsLyLeft":-78.85118661,"vsLyLeftPositive":false,"vsLyRight":81.83044646},"mixPercentage":{"mixActual":100.000000,"mixTarget":32.255100,"mixVsLy":-81.415700,"mixVsLyPositive":false},"rmDiscountActual":0,"rmDiscountTarget":0},"funded":{"grossProfitDollars":{"vsTgLeft":-13.74745775,"vsTgLeftPositive":false,"vsTgRight":41.19712275,"vsLyLeft":4.70552454,"vsLyLeftPositive":true,"vsLyRight":22.74414046},"volume":{"vsTgLeft":60.50131826,"vsTgLeftPositive":true,"vsTgRight":164.990500,"vsLyLeft":67.70154022,"vsLyLeftPositive":true,"vsLyRight":229.735400},"margin":{"vsTgLeft":-47.57947394,"vsTgLeftPositive":false,"vsTgRight":66.24297885,"vsLyLeft":-5.15277801,"vsLyLeftPositive":false,"vsLyRight":23.81628292},"mixPercentage":{"mixActual":100.000000,"mixTarget":57.955600,"mixVsLy":-16.711400,"mixVsLyPositive":false}},"ccc":{"grossProfitDollars":{"vsTgLeft":-19.99701760,"vsTgLeftPositive":false,"vsTgRight":30.40348041,"vsLyLeft":-35.48527347,"vsLyLeftPositive":false,"vsLyRight":45.89173628},"volume":{"vsTgLeft":20.58531000,"vsTgLeftPositive":true,"vsTgRight":265.691200,"vsLyLeft":-23.17493410,"vsLyLeftPositive":false,"vsLyRight":-44.992800},"margin":{"vsTgLeft":-20.49393786,"vsTgLeftPositive":false,"vsTgRight":45.36771097,"vsLyLeft":-3.00693396,"vsLyLeftPositive":false,"vsLyRight":27.88070707},"mixPercentage":{"mixActual":100.000000,"mixTarget":12.245300,"mixVsLy":-86.105600,"mixVsLyPositive":false}}}]';
     // let s=JSON.parse(JSON.stringify("{'temporalPeriod':'MTD','pfjTotal':{'grossProfitDollars':{'vsTgLeft':59,'vsTgLeftPositive':true,'vsTgRight':11,'vsLyLeft':5,'vsLyLeftPositive':true,'vsLyRight':65},'volume':{'vsTgLeft':60,'vsTgLeftPositive':true,'vsTgRight':467,'vsLyLeft':70,'vsLyLeftPositive':true,'vsLyRight':2087},'margin':{'vsTgLeft':-25,'vsTgLeftPositive':false,'vsTgRight':95,'vsLyLeft':59,'vsLyLeftPositive':true,'vsLyRight':10},'totalGAL':3,'totalTarget':13},'betterOf':{'grossProfitDollars':{'vsTgLeft':-32,'vsTgLeftPositive':false,'vsTgRight':80,'vsLyLeft':29,'vsLyLeftPositive':true,'vsLyRight':17},'volume':{'vsTgLeft':55,'vsTgLeftPositive':true,'vsTgRight':156,'vsLyLeft':56,'vsLyLeftPositive':true,'vsLyRight':165},'margin':{'vsTgLeft':42,'vsTgLeftPositive':true,'vsTgRight':10,'vsLyLeft':-18,'vsLyLeftPositive':false,'vsLyRight':71},'mixPercentage':{'mixActual':100,'mixTarget':270,'mixVsLy':-87,'mixVsLyPositive':false},'buyingPerfActual':3,'buyingPerfTarget':92,'effPumpFeeActual':23,'effPumpFeeTarget':90},'totalRetail':{'grossProfitDollars':{'vsTgLeft':-1,'vsTgLeftPositive':false,'vsTgRight':71,'vsLyLeft':40,'vsLyLeftPositive':true,'vsLyRight':29},'volume':{'vsTgLeft':-11,'vsTgLeftPositive':false,'vsTgRight':-87,'vsLyLeft':-56,'vsLyLeftPositive':false,'vsLyRight':-97},'margin':{'vsTgLeft':5,'vsTgLeftPositive':true,'vsTgRight':84,'vsLyLeft':85,'vsLyLeftPositive':true,'vsLyRight':5},'mixPercentage':{'mixActual':100,'mixTarget':97,'mixVsLy':-99,'mixVsLyPositive':false}},'retailMinus':{'grossProfitDollars':{'vsTgLeft':-53,'vsTgLeftPositive':false,'vsTgRight':89,'vsLyLeft':-49,'vsLyLeftPositive':false,'vsLyRight':86},'volume':{'vsTgLeft':-57,'vsTgLeftPositive':false,'vsTgRight':-59,'vsLyLeft':-58,'vsLyLeftPositive':false,'vsLyRight':-60},'margin':{'vsTgLeft':-48,'vsTgLeftPositive':false,'vsTgRight':80,'vsLyLeft':7,'vsLyLeftPositive':true,'vsLyRight':25},'mixPercentage':{'mixActual':100,'mixTarget':743,'mixVsLy':-98,'mixVsLyPositive':false},'rmDiscountActual':0,'rmDiscountTarget':0},'funded':{'grossProfitDollars':{'vsTgLeft':13,'vsTgLeftPositive':true,'vsTgRight':8,'vsLyLeft':-56,'vsLyLeftPositive':false,'vsLyRight':78},'volume':{'vsTgLeft':-4,'vsTgLeftPositive':false,'vsTgRight':-10,'vsLyLeft':-15,'vsLyLeftPositive':false,'vsLyRight':-30},'margin':{'vsTgLeft':-41,'vsTgLeftPositive':false,'vsTgRight':88,'vsLyLeft':24,'vsLyLeftPositive':true,'vsLyRight':22},'mixPercentage':{'mixActual':100,'mixTarget':293,'mixVsLy':-96,'mixVsLyPositive':false}},'ccc':{'grossProfitDollars':{'vsTgLeft':32,'vsTgLeftPositive':true,'vsTgRight':64,'vsLyLeft':86,'vsLyLeftPositive':true,'vsLyRight':10},'volume':{'vsTgLeft':-56,'vsTgLeftPositive':false,'vsTgRight':-57,'vsLyLeft':-7,'vsLyLeftPositive':false,'vsLyRight':-14},'margin':{'vsTgLeft':39,'vsTgLeftPositive':true,'vsTgRight':37,'vsLyLeft':12,'vsLyLeftPositive':true,'vsLyRight':63},'mixPercentage':{'mixActual':100,'mixTarget':754,'mixVsLy':-96,'mixVsLyPositive':false}}}"));
      s = s.replace(/\\n/g, "\\n")  
               .replace(/\\'/g, "\\'")
               .replace(/\\"/g, '\\"')
               .replace(/\\&/g, "\\&")
               .replace(/\\r/g, "\\r")
               .replace(/\\t/g, "\\t")
               .replace(/\\b/g, "\\b")
               .replace(/\\f/g, "\\f");
// remove non-printable and other non-valid JSON chars
//s = s.replace(/[\u0000-\u0019]+/g,""); 
var o = JSON.parse(s);
      console.log(o);
      this.PopulateCustomerPricingDetails(o);
  }

  PopulateCustomerPricingDetails(data)
  {
    this.repository.customerPricingDetails = new PfjOverviewOperations().PopulateCustomerPricingDetails(data);
    this.ProcessSelectedCustomerPricingDetails("MTD");
    this.repository.selectedDataPeriod = "MTD";
    this.repository.selectedTableauFilter = "GROSS PROFIT $";
    this.ToggleTableauHeaderTxt("GROSS PROFIT $");
  }

  ProcessSelectedCustomerPricingDetails(dataPeriod)
  {
    this.repository.selctedCustomerPricingDetails = this.repository.customerPricingDetails.find(c=>c.temporalPeriod.toUpperCase() == dataPeriod.toUpperCase());
    this.selectedCustPricingDetails = this.repository.selctedCustomerPricingDetails;
    console.log(JSON.stringify(this.selectedCustPricingDetails));
    this.repository.selectedDataPeriod = dataPeriod;
  }

  ToggleTableauHeaderTxt(data)
  {
    console.log(data);
    this.repository.selectedTableauFilter = data;
    this.repository.selectedViewTableau = data;
  }
}
